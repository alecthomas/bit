# Based on Redo example: https://redo.readthedocs.io/en/latest/

myprog: *.o
  build: cc -o %{OUT} %{IN}

a.o: %(cc -MM a.c | cut -d: -f2-)%
  build: cc -c -o %{OUT} a.c

b.o: %(cc -MM b.c | cut -d: -f2-)%
  build: cc -c -o %{OUT} %{IN}
